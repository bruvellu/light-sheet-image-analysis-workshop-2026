---
title: Macro programming in Fiji
author: Marina Cuenca
date: 05 January 2026
---


# Introduction to Macro Programming in Fiji

Fiji includes a built-in macro language that allows you to automate repetitive image-processing tasks, ensure reproducibility, and scale analyses to large datasets. Macros can record actions performed in the graphical user interface (GUI) and translate them into editable code, making them an excellent entry point into scripting.

This tutorial introduces the basics of working with macros in Fiji.

## Learning Outcomes

By the end of this tutorial, participants will be able to:

- Use the Fiji Macro Editor and Macro Recorder to create and modify ImageJ macros.
- Build batch-processing macros to analyze large image datasets automatically.
- Design interactive macros that accept user-defined parameters via dialogs.
- Write clear, reusable macro code using variables, loops, and functions.
- Implement reproducible image-analysis workflows that can be shared and rerun.
- Adapt existing macros to new datasets and experimental conditions.

---

## Basic Macro concepts

### 1. Opening the Macro Editor in Fiji

To write or edit macros in Fiji, you will use the **Script Editor**, which includes support for the ImageJ Macro language.

1. Open **Fiji**.
2. From the top menu bar, go to  
   **`File → New → Script…`**
   A new window will open. This is the **Macro Editor**, where you can write, edit, and run macro code.
4. From the top menu bar, go to  
   **`Language → ImageJ Macro`**

Once the editor is open, you can start writing macros or paste code generated by the Macro Recorder.

### 2. Comments, variables and strings

1. To write comments that won't run in your script use `//`. 
2. Variables hold values and can be defined by operators.
3. We need to explicit the end of a line of code using semicolons.
4. Strings are chain of characters inside `""`.
5. We can print variables or strings with the function `print()`

### 3. Colorcode and debugging

Macro code contains colorcoded text. 
Pink = strings
Yellow = commands
Green = comments

If something is off, likely you made a mistake in the code. And if so, when you run the code you'll have a pop up window with a very broad description of what might have gone wrong and where (in general not very helpful).

### 4. The macro recorder

The life changing tool that will make you grow fond of Fiji.
Go to  **`Plugins → Macro → Record...`**

Now everything we do will be "recorded" and we can turn it into reproducible image analysis pipelines that run automatically. 

---

## Reproducible and automatic pipeline

Now, with the recorder open we will create a Macro that changes automatically Brightness and contrast features of a multi channel image and creates a png figure with scale bar.

#### 1. Open a Sample Image

1. Open **Fiji**.
2. From the menu bar, go to:  
   **`File → Open Samples → Fluorescent Cells`**

This will load a multichannel fluorescence image provided with Fiji.


#### 2. Split the Image into Channels

1. With the image window active, go to:  
   **`Image → Color → Split Channels`**

Fiji will create separate grayscale images for each fluorescence channel (e.g. C1, C2, C3).


#### 3. Adjust Display Contrast for Each Channel

Adjust the display range of each channel individually.

1. Go to:  
   **`Image → Adjust → Brightness/Contrast…`**
2. Change the minimum or maximum values. Do it arbitrarily, it's just a test!
3. Click **Set** or **Apply**.
4. Repeat for the other channels

> Note: These values affect only the display, not the underlying pixel data.


#### 4. Merge Channels into a Composite Image

1. Go to:  
   **`Image → Color → Merge Channels…`**
2. Click **OK**.

A merged multichannel image will be created.


#### 5. Add a Scale Bar

1. Select the merged image window.
2. Go to:  
   **`Analyze → Tools → Scale Bar…`**
   Ideally, the scale bar will be in microns but in this sample image it will be in pixels.
3. Click **OK**.


#### 6. Convert the Image to RGB

1. With the merged image selected, go to:  
   **`Image → Type → RGB Color`**

This step is required before saving the image in common formats such as PNG.


#### 7. Save the Final Image

1. Go to:  
   **`File → Save As → PNG…`**
2. Choose a destination folder.
3. Name the file (e.g. `FluorescentCells.png`).
4. Click **Save**.


You have now manually completed the same workflow that will later be automated using a Fiji macro.
Go to the recorder and click `Create`. Now let's run it! You will obtain the same result of your manual pipeline and you can apply this to other images from the same experiment to compare visually using the same B&C parameters and get png images ready for publications. 

---

## 



