<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Bruno Vellutini">
<meta name="dcterms.date" content="2026-01-05">

<title>Multiview reconstruction using BigStitcher ‚Äì üî¨ Light-Sheet Image Analysis Workshop 2026</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../practicals/practical_segmentation/index.html" rel="next">
<link href="../../practicals/practical_macros/index.html" rel="prev">
<link href="../../https://www.flaticon.com/free-icons/microscope" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-635a35c16803d16fd9db22f392043487.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Multiview reconstruction using BigStitcher ‚Äì üî¨ Light-Sheet Image Analysis Workshop 2026">
<meta property="og:description" content="">
<meta property="og:image" content="https://bruvellu.github.io/light-sheet-image-analysis-workshop-2026/practicals/practical_multiview/media/01-fiji-unzip.png">
<meta property="og:site_name" content="üî¨ Light-Sheet Image Analysis Workshop 2026">
<meta property="og:image:height" content="979">
<meta property="og:image:width" content="1920">
<meta name="twitter:title" content="Multiview reconstruction using BigStitcher ‚Äì üî¨ Light-Sheet Image Analysis Workshop 2026">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://bruvellu.github.io/light-sheet-image-analysis-workshop-2026/practicals/practical_multiview/media/01-fiji-unzip.png">
<meta name="twitter:image-height" content="979">
<meta name="twitter:image-width" content="1920">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">üî¨ Light-Sheet Image Analysis Workshop 2026</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <a href="https://github.com/bruvellu/light-sheet-image-analysis-workshop-2026" title="GitHub" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../practicals/practical_2d/index.html">Practicals</a></li><li class="breadcrumb-item"><a href="../../practicals/practical_multiview/index.html">Multiview reconstruction using BigStitcher</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Help</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Program</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Practicals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_2d/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualization of 2D images</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_3d/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualization of 3D data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_cartography/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tissue cartography using Blender</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_macros/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Macro programming in Fiji</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_multiview/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Multiview reconstruction using BigStitcher</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_segmentation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Post-processing, segmentation and labelling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_tracking/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cell tracking using Mastodon</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Practical Deep Learning</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_deep_learning/deep_learning_segmentation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3D Deep Learning Segmentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../practicals/practical_deep_learning/object-classification/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Object-classification, dimensionality reduction and clustering</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-summary" id="toc-sec-summary" class="nav-link active" data-scroll-target="#sec-summary">Summary</a></li>
  <li><a href="#sec-requirements" id="toc-sec-requirements" class="nav-link" data-scroll-target="#sec-requirements">Requirements</a></li>
  <li><a href="#sec-setup" id="toc-sec-setup" class="nav-link" data-scroll-target="#sec-setup">Setup</a>
  <ul>
  <li><a href="#install-fiji" id="toc-install-fiji" class="nav-link" data-scroll-target="#install-fiji">Install Fiji</a></li>
  <li><a href="#install-bigstitcher" id="toc-install-bigstitcher" class="nav-link" data-scroll-target="#install-bigstitcher">Install BigStitcher</a></li>
  <li><a href="#download-dataset" id="toc-download-dataset" class="nav-link" data-scroll-target="#download-dataset">Download dataset</a></li>
  </ul></li>
  <li><a href="#sec-inspect-dataset" id="toc-sec-inspect-dataset" class="nav-link" data-scroll-target="#sec-inspect-dataset">Inspect dataset</a>
  <ul>
  <li><a href="#open-file" id="toc-open-file" class="nav-link" data-scroll-target="#open-file">Open file</a></li>
  <li><a href="#adjust-contrast" id="toc-adjust-contrast" class="nav-link" data-scroll-target="#adjust-contrast">Adjust contrast</a></li>
  <li><a href="#open-orthogonal-views" id="toc-open-orthogonal-views" class="nav-link" data-scroll-target="#open-orthogonal-views">Open orthogonal views</a></li>
  </ul></li>
  <li><a href="#sec-define-dataset" id="toc-sec-define-dataset" class="nav-link" data-scroll-target="#sec-define-dataset">Define dataset</a></li>
  <li><a href="#sec-resave-dataset" id="toc-sec-resave-dataset" class="nav-link" data-scroll-target="#sec-resave-dataset">Resave dataset</a></li>
  <li><a href="#sec-visualize-dataset" id="toc-sec-visualize-dataset" class="nav-link" data-scroll-target="#sec-visualize-dataset">Visualize dataset</a>
  <ul>
  <li><a href="#start-bigstitcher" id="toc-start-bigstitcher" class="nav-link" data-scroll-target="#start-bigstitcher">Start BigStitcher</a></li>
  <li><a href="#learn-bigdataviewer" id="toc-learn-bigdataviewer" class="nav-link" data-scroll-target="#learn-bigdataviewer">Learn BigDataViewer</a></li>
  </ul></li>
  <li><a href="#sec-detect-points" id="toc-sec-detect-points" class="nav-link" data-scroll-target="#sec-detect-points">Detect points</a></li>
  <li><a href="#sec-register-views" id="toc-sec-register-views" class="nav-link" data-scroll-target="#sec-register-views">Register views</a></li>
  <li><a href="#sec-set-bounding" id="toc-sec-set-bounding" class="nav-link" data-scroll-target="#sec-set-bounding">Set bounding box</a></li>
  <li><a href="#sec-fuse-single" id="toc-sec-fuse-single" class="nav-link" data-scroll-target="#sec-fuse-single">Fuse dataset (one channel)</a></li>
  <li><a href="#sec-duplicate-transformation" id="toc-sec-duplicate-transformation" class="nav-link" data-scroll-target="#sec-duplicate-transformation">Duplicate transformation</a></li>
  <li><a href="#sec-fuse-all" id="toc-sec-fuse-all" class="nav-link" data-scroll-target="#sec-fuse-all">Fuse dataset (all channels)</a></li>
  <li><a href="#sec-citation" id="toc-sec-citation" class="nav-link" data-scroll-target="#sec-citation">Citation</a></li>
  <li><a href="#sec-license" id="toc-sec-license" class="nav-link" data-scroll-target="#sec-license">License</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/bruvellu/light-sheet-image-analysis-workshop-2026/edit/main/practicals/practical_multiview/index.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/bruvellu/light-sheet-image-analysis-workshop-2026/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../practicals/practical_2d/index.html">Practicals</a></li><li class="breadcrumb-item"><a href="../../practicals/practical_multiview/index.html">Multiview reconstruction using BigStitcher</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Multiview reconstruction using BigStitcher</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Bruno Vellutini </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 5, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="sec-summary" class="level2">
<h2 class="anchored" data-anchor-id="sec-summary">Summary</h2>
<p>Multiview reconstruction is the process of registering and fusing microscopy data acquired from multiple angles into a single, isotropic stack.</p>
<p>This tutorial shows how to register and fuse multiview lightsheet microscopy datasets using the plugin BigStitcher <span class="citation" data-cites="Preibisch2010-uu Horl2019-vx">(<a href="#ref-Preibisch2010-uu" role="doc-biblioref">Preibisch et al. 2010</a>; <a href="#ref-Horl2019-vx" role="doc-biblioref">H√∂rl et al. 2019</a>)</span> in Fiji <span class="citation" data-cites="Schindelin2012-di">(<a href="#ref-Schindelin2012-di" role="doc-biblioref">Schindelin et al. 2012</a>)</span>.</p>
<p>We will cover how to convert the raw data for visualization in the BigDataViewer <span class="citation" data-cites="Pietzsch2015-md">(<a href="#ref-Pietzsch2015-md" role="doc-biblioref">Pietzsch et al. 2015</a>)</span>, how to best detect interests points for registration, the different approaches to register views, and how to fuse the views to reconstruct an isotropic dataset.</p>
</section>
<section id="sec-requirements" class="level2">
<h2 class="anchored" data-anchor-id="sec-requirements">Requirements</h2>
<ul>
<li><a href="https://fiji.sc">Fiji</a> <span class="citation" data-cites="Schindelin2012-di">(<a href="#ref-Schindelin2012-di" role="doc-biblioref">Schindelin et al. 2012</a>)</span></li>
<li><a href="https://imagej.net/plugins/bigstitcher">BigStitcher</a> plugin <span class="citation" data-cites="Preibisch2010-uu Horl2019-vx">(<a href="#ref-Preibisch2010-uu" role="doc-biblioref">Preibisch et al. 2010</a>; <a href="#ref-Horl2019-vx" role="doc-biblioref">H√∂rl et al. 2019</a>)</span></li>
<li><a href="https://doi.org/10.5281/zenodo.18078061">Fly Embryo Multiview Lightsheet</a> dataset <span class="citation" data-cites="Vellutini2025-rl">(<a href="#ref-Vellutini2025-rl" role="doc-biblioref">Vellutini 2025</a>)</span></li>
</ul>
</section>
<section id="sec-setup" class="level2">
<h2 class="anchored" data-anchor-id="sec-setup">Setup</h2>
<section id="install-fiji" class="level3">
<h3 class="anchored" data-anchor-id="install-fiji">Install Fiji</h3>
<ul>
<li>Go to <a href="https://fiji.sc" class="uri">https://fiji.sc</a>, choose <code>Distribution: Stable</code>, and click the download button.</li>
<li>Copy the downloaded archive to your working directory and unzip it.</li>
</ul>
<p><a href="media/01-fiji-unzip.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="media/01-fiji-unzip.png" class="img-fluid"></a></p>
<ul>
<li>Open the <code>Fiji.app</code> directory and double-click on the launcher.</li>
</ul>
<p><a href="media/02-fiji-open.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="media/02-fiji-open.png" class="img-fluid"></a></p>
<p>The main window of Fiji will open.</p>
</section>
<section id="install-bigstitcher" class="level3">
<h3 class="anchored" data-anchor-id="install-bigstitcher">Install BigStitcher</h3>
<ul>
<li>Click on <code>Help</code> &gt; <code>Update...</code>.</li>
</ul>
<p><a href="media/03-fiji-update.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="media/03-fiji-update.png" class="img-fluid"></a></p>
<p>The updater will run and say if Fiji is up-to-date.</p>
<ul>
<li>Click on <code>Manage Update Sites</code>.</li>
</ul>
<p><a href="media/04-fiji-manage.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="media/04-fiji-manage.png" class="img-fluid"></a></p>
<p>A window will open with a list of plugins available to install in Fiji.</p>
<p><a href="media/05-fiji-plugins.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="media/05-fiji-plugins.png" class="img-fluid"></a></p>
<ul>
<li>Find BigStitcher in the list and click on the checkbox and <code>Apply and Close</code>.</li>
</ul>
<p><a href="media/06-fiji-bigstitcher.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="media/06-fiji-bigstitcher.png" class="img-fluid"></a></p>
<ul>
<li>Then click on <code>Apply Changes</code>.</li>
</ul>
<p><a href="media/07-fiji-changes.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="media/07-fiji-changes.png" class="img-fluid"></a></p>
<ul>
<li>Wait‚Ä¶ until the downloads are finished. Then, click <code>OK</code>.</li>
</ul>
<p><a href="media/08-fiji-ok.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="media/08-fiji-ok.png" class="img-fluid"></a></p>
<ul>
<li>Restart Fiji (close window and double-click the launcher).</li>
<li>Check if BigStitcher is installed under <code>Plugins</code> &gt; <code>BigStitcher</code>.</li>
</ul>
<p><a href="media/09-fiji-ready.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="media/09-fiji-ready.png" class="img-fluid"></a></p>
<p>Fiji and BigStitcher are ready!</p>
</section>
<section id="download-dataset" class="level3">
<h3 class="anchored" data-anchor-id="download-dataset">Download dataset</h3>
<ul>
<li><code>Dmel_btd-gap_1tp_5v_2c_beads.czi</code> dataset from this <a href="https://doi.org/10.5281/zenodo.18078061">Zenodo repository</a> <span class="citation" data-cites="Vellutini2025-rl">(<a href="#ref-Vellutini2025-rl" role="doc-biblioref">Vellutini 2025</a>)</span>. The direct link to the file is <a href="https://zenodo.org/records/18078061/files/Dmel_btd-gap_1tp_5v_2c_beads.czi?download=1">here</a> (3.2GB).</li>
</ul>
</section>
</section>
<section id="sec-inspect-dataset" class="level2">
<h2 class="anchored" data-anchor-id="sec-inspect-dataset">Inspect dataset</h2>
<p>The dataset is a single CZI file that contains a single timepoint with 5 different views, each view with 2 channels and 60 slices. The XY resolution is 0.276 ¬µm and the Z resolution is 3 ¬µm. The dataset has fluorescent beads around the sample, which we will use to register the views.</p>
<p>Let‚Äôs inspect the dataset in Fiji.</p>
<section id="open-file" class="level3">
<h3 class="anchored" data-anchor-id="open-file">Open file</h3>
<ul>
<li>Drag and drop the CZI file in Fiji‚Äôs main window.</li>
</ul>
<p><a href="media/10-open-czi.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="media/10-open-czi.png" class="img-fluid"></a></p>
<p>A Bio-Formats Import Options window should open. That‚Äôs the default importer for proprietary file formats with many options, but for now we go with the default.</p>
<ul>
<li>Press <code>OK</code>.</li>
</ul>
<p><a href="media/11-open-bioformats.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="media/11-open-bioformats.png" class="img-fluid"></a></p>
<p>A Bio-Formats Series Options window will open. Bio-Formats recognized that this file contains more than one view (series) and is asking which ones do we want to open. We just want to inspect the first view since they will be quite similar.</p>
<ul>
<li>Press <code>OK</code>.</li>
</ul>
<p><a href="media/12-open-series.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="media/12-open-series.png" class="img-fluid"></a></p>
</section>
<section id="adjust-contrast" class="level3">
<h3 class="anchored" data-anchor-id="adjust-contrast">Adjust contrast</h3>
<p>A big window with a black background will open.</p>
<ul>
<li>Check if the dimensions were correctly assigned (information line at the top and sliders at the bottom).</li>
</ul>
<p><a href="media/13-open-stack.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="media/13-open-stack.png" class="img-fluid"></a></p>
<p>To see something, we first need to adjust the levels.</p>
<ul>
<li>Open the <code>Brightness/Contrast (B&amp;C)</code> tool with <code>Image</code> &gt; <code>Adjust</code> &gt; <code>Brightness/Contrast...</code> (or <code>Ctrl+Shift+C</code>) and the <code>Channels Tool</code> with <code>Image</code> &gt; <code>Color</code> &gt; <code>Channels Tool...</code> (or <code>Ctrl+Shift+Z</code>).</li>
</ul>
<p><a href="media/14-stack-tools.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="media/14-stack-tools.png" class="img-fluid"></a></p>
<ul>
<li>Press <code>Reset</code> to adjust the levels of <code>Channel 1</code> then slide the Z position to the middle of the sample and press <code>Reset</code> again.</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/15-stack-reset.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="media/15-stack-reset.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/16-stack-again.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="media/16-stack-again.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<ul>
<li>Now move the Channel slider to <code>Channel 2</code> and press <code>Reset</code>.</li>
</ul>
<p><a href="media/17-stack-channel.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="media/17-stack-channel.png" class="img-fluid"></a></p>
<ul>
<li>In the Channels window, change the menu <code>Color</code> to <code>Composite</code>.</li>
</ul>
<p><a href="media/18-stack-composite.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="media/18-stack-composite.png" class="img-fluid"></a></p>
<p>The sample is ready to be visualized.</p>
</section>
<section id="open-orthogonal-views" class="level3">
<h3 class="anchored" data-anchor-id="open-orthogonal-views">Open orthogonal views</h3>
<p>To get a sense of the data tridimensionality we want to look at the XY, XZ, and YZ optical sections.</p>
<ul>
<li>Click on <code>Image</code> &gt; <code>Stacks</code> &gt; <code>Orthogonal Views</code> (or <code>Ctrl+Shift+H</code>). It takes a moment; XZ and YZ panels will open.</li>
</ul>
<p><a href="media/19-stack-orthogonal.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="media/19-stack-orthogonal.png" class="img-fluid"></a></p>
<ul>
<li>Resize the main window to fit the screen.</li>
</ul>
<p><a href="media/20-stack-explore.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20"><img src="media/20-stack-explore.png" class="img-fluid"></a></p>
<p>The sample is a fly embryo which resembles a cylinder in 3D.</p>
<ul>
<li>Explore the dataset by clicking and sliding the mouse pointer through the different images.</li>
<li>When done, close the stack.</li>
</ul>
</section>
</section>
<section id="sec-define-dataset" class="level2">
<h2 class="anchored" data-anchor-id="sec-define-dataset">Define dataset</h2>
<p>Before we begin, we need to define a multiview dataset and resave the dataset. Defining a multiview dataset will create an XML file where all the dataset metadata and information and data from the registration process will be stored.</p>
<ul>
<li>Go to <code>Plugins</code> &gt; <code>BigStitcher</code> &gt; <code>General</code> &gt; <code>Define Multi-View Dataset</code>.</li>
</ul>
<p><a href="media/21-dataset-define.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="media/21-dataset-define.png" class="img-fluid"></a></p>
<p>A window named Choose method to define dataset will open.</p>
<ul>
<li>On the <code>Define Dataset</code> field choose <code>Zeiss Lightsheet Z.1 Dataset Loader (Bioformats)</code> from the dropdown menu, since our testing dataset is from Zeiss Lightsheet Z.1.</li>
<li>Then, press <code>OK</code>.</li>
</ul>
<p><a href="media/22-dataset-zeiss.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22"><img src="media/22-dataset-zeiss.png" class="img-fluid"></a></p>
<ul>
<li>Click <code>Browse</code>, select the CZI file, and press <code>OK</code>.</li>
</ul>
<p><a href="media/23-dataset-browse.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23"><img src="media/23-dataset-browse.png" class="img-fluid"></a></p>
<p>BigStitcher will read the metadata of the CZI and show a dialog with the details.</p>
<ul>
<li>Check if five angles are present, if there are two channels, and if the XYZ resolution matches the expected values (see above).</li>
<li>Then, press <code>OK</code>.</li>
</ul>
<p><a href="media/24-dataset-metadata.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24"><img src="media/24-dataset-metadata.png" class="img-fluid"></a></p>
<p>If we look into the working directory, an XML file named <code>dataset</code> will have appeared there.</p>
<p><a href="media/25-dataset-xml.png" class="lightbox" data-gallery="quarto-lightbox-gallery-25"><img src="media/25-dataset-xml.png" class="img-fluid"></a></p>
<p>We can open this file in a text editor to see the information stored there.</p>
<ul>
<li>Right-click the file, select <code>Open With...</code> and choose <code>Text Editor</code>.</li>
<li>The file has the file name, the image dimensions, the XYZ resolution, etc.</li>
</ul>
<p><a href="media/26-dataset-contents.png" class="lightbox" data-gallery="quarto-lightbox-gallery-26"><img src="media/26-dataset-contents.png" class="img-fluid"></a></p>
<p>Note: the XML only stores metadata from the dataset and not the actual image data.</p>
</section>
<section id="sec-resave-dataset" class="level2">
<h2 class="anchored" data-anchor-id="sec-resave-dataset">Resave dataset</h2>
<p>Next, we need to convert the actual image, which is still stored in the CZI, to a format that allows us to open and visualize this heavy dataset in an efficient and lightweight manner. For that, we will resave the data into HDF5 format.</p>
<ul>
<li>Go to <code>Plugins</code> &gt; <code>BigStitcher</code> &gt; <code>I/O</code> &gt; <code>Resave as HDF5 (local)</code>.</li>
</ul>
<p><a href="media/27-resave-start.png" class="lightbox" data-gallery="quarto-lightbox-gallery-27"><img src="media/27-resave-start.png" class="img-fluid"></a></p>
<p>The new window Select dataset for Resaving as HDF5 will automatically load the last used XML file, in this case, our <code>dataset.xml</code>. We can choose whether we want to convert every angle, all channels, all timepoints, or only a subset of those.</p>
<ul>
<li>We want it all, press <code>OK</code>.</li>
</ul>
<p><a href="media/28-resave-all.png" class="lightbox" data-gallery="quarto-lightbox-gallery-28"><img src="media/28-resave-all.png" class="img-fluid"></a></p>
<p>Another window will appear with some resaving options. Leave the options as is, but make sure that the <code>Export path</code> is pointing to the <code>dataset.xml</code> file.</p>
<ul>
<li>Click on <code>Browse</code> and, if the file is not selected, navigate and select <code>dataset.xml</code>.</li>
<li>Press <code>OK</code> and wait‚Ä¶</li>
</ul>
<p><a href="media/29-resave-file.png" class="lightbox" data-gallery="quarto-lightbox-gallery-29"><img src="media/29-resave-file.png" class="img-fluid"></a></p>
<p>Resaving this dataset takes about 3 min. However, larger datasets with several timepoints, for example, will take significantly longer. The Log window will show that it‚Äôs done.</p>
<p><a href="media/30-resave-done.png" class="lightbox" data-gallery="quarto-lightbox-gallery-30"><img src="media/30-resave-done.png" class="img-fluid"></a></p>
<p>Note that another XML file named <code>dataset.xml~1</code> and a new HDF5 file named <code>dataset.h5</code> were created. Every time the dataset file is saved, BigStitcher creates a backup copy. <code>dataset.xml~1</code> was the original <code>dataset.xml</code> which was renamed after the resaving. If we inspect the new <code>dataset.xml</code> in a Text Editor we will see that it now points to the <code>dataset.h5</code> file.</p>
<ul>
<li>Open the new <code>dataset.xml</code> in a text editor.</li>
</ul>
<p><a href="media/31-resave-xml.png" class="lightbox" data-gallery="quarto-lightbox-gallery-31"><img src="media/31-resave-xml.png" class="img-fluid"></a></p>
<p>Whenever we refer to the multiview dataset, we mean the XML/HDF5 pair; they are always together.</p>
</section>
<section id="sec-visualize-dataset" class="level2">
<h2 class="anchored" data-anchor-id="sec-visualize-dataset">Visualize dataset</h2>
<p>We can finally open the main BigStitcher application and begin the multiview reconstruction.</p>
<section id="start-bigstitcher" class="level3">
<h3 class="anchored" data-anchor-id="start-bigstitcher">Start BigStitcher</h3>
<ul>
<li>Go to <code>Plugins</code> &gt; <code>BigStitcher</code> &gt; <code>BigStitcher</code>.</li>
</ul>
<p><a href="media/32-bigstitcher-start.png" class="lightbox" data-gallery="quarto-lightbox-gallery-32"><img src="media/32-bigstitcher-start.png" class="img-fluid"></a></p>
<p>The last <code>dataset.xml</code> file will be automatically loaded in the select dataset window.</p>
<ul>
<li>Click <code>OK</code>.</li>
</ul>
<p><a href="media/33-bigstitcher-latest.png" class="lightbox" data-gallery="quarto-lightbox-gallery-33"><img src="media/33-bigstitcher-latest.png" class="img-fluid"></a></p>
<p>This will open two windows, the BigDataViewer and the Multiview Explorer.</p>
<p><a href="media/34-bigstitcher-windows.png" class="lightbox" data-gallery="quarto-lightbox-gallery-34"><img src="media/34-bigstitcher-windows.png" class="img-fluid"></a></p>
<p>The Multiview Explorer shows a table with the individual views of the dataset. We have 5 views, each with 2 channels. Therefore, we have in total 10 views. Clicking in a row will show the data in the BigDataViewer. We can also sort the table by channel or angle.</p>
<ul>
<li>Select multiple rows freely and try sorting it.</li>
<li>Then, select the five views from <code>Channel 561</code> (channel 2).</li>
</ul>
<p><a href="media/35-bigstitcher-bright.png" class="lightbox" data-gallery="quarto-lightbox-gallery-35"><img src="media/35-bigstitcher-bright.png" class="img-fluid"></a></p>
<p>The image is too bright, we need to adjust the contrast.</p>
<ul>
<li>Go to <code>Settings</code> &gt; <code>Brightness &amp; Color</code>.</li>
</ul>
<p><a href="media/36-bigstitcher-contrast.png" class="lightbox" data-gallery="quarto-lightbox-gallery-36"><img src="media/36-bigstitcher-contrast.png" class="img-fluid"></a></p>
<p>A new window will open.</p>
<ul>
<li>Change the max value of channel 2 to <code>2500</code>.</li>
</ul>
<p><a href="media/37-bigstitcher-adjusted.png" class="lightbox" data-gallery="quarto-lightbox-gallery-37"><img src="media/37-bigstitcher-adjusted.png" class="img-fluid"></a></p>
<p>Now we can visualize the dataset in more detail.</p>
</section>
<section id="learn-bigdataviewer" class="level3">
<h3 class="anchored" data-anchor-id="learn-bigdataviewer">Learn BigDataViewer</h3>
<p>It is important to familiarize yourself with the BigDataViewer commands and shortcuts. BigDataViewer is very intuitive to use but a quick look at the Help is important to not get lost.</p>
<p><code>Shift+X</code>, <code>Shift+Y</code>, <code>Shift+Z</code> are our compass. If we get lost, pressing one of these shortcuts will get us back to the original XY, YZ, ZX orientation. In this scope the rotation axis is Y. Therefore, pressing <code>Shift+Y</code> will show the different angles from ‚Äúabove‚Äù.</p>
<ul>
<li>Press <code>Shift+Y</code> and adjust the view to see the five angles.</li>
</ul>
<p><a href="media/38-bigstitcher-shifty.png" class="lightbox" data-gallery="quarto-lightbox-gallery-38"><img src="media/38-bigstitcher-shifty.png" class="img-fluid"></a></p>
<p>Some of the most important commands are as follows:</p>
<ul>
<li><code>Left-click and drag</code> to rotate the data around the mouse pointer.</li>
<li><code>Right-click and drag</code> to move the view across XY plane.</li>
<li><code>Ctrl+Shift+Scroll</code> to zoom in/out fast (<code>Ctrl+Scroll</code> for normal speed).</li>
<li>Select the BigDataViewer window and press <code>I</code> to activate tri-linear interpolation for better visualization.</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/39-bigstitcher-nearest.png" class="lightbox" data-gallery="quarto-lightbox-gallery-39"><img src="media/39-bigstitcher-nearest.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/40-bigstitcher-interpolation.png" class="lightbox" data-gallery="quarto-lightbox-gallery-40"><img src="media/40-bigstitcher-interpolation.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<ul>
<li>Select the Multiview Explorer window with the five views selected and press <code>C</code>. This will autocolor the views which is great for visualization.</li>
</ul>
<p><a href="media/41-bigstitcher-ready.png" class="lightbox" data-gallery="quarto-lightbox-gallery-41"><img src="media/41-bigstitcher-ready.png" class="img-fluid"></a></p>
<p>Take some time to explore the data, the different views, zoom in and out, find the beads, and get familiar with the BigDataViewer. Then finish with the 5-views oriented as in the image above.</p>
</section>
</section>
<section id="sec-detect-points" class="level2">
<h2 class="anchored" data-anchor-id="sec-detect-points">Detect points</h2>
<p>We can now start the first processing step of the pipeline, detecting points of interest to be used for the registration. The Multiview Explorer is always the starting point.</p>
<ul>
<li>Select the five views of channel 561 (if not selected).</li>
</ul>
<p>In this case, we want only the views of channel 2 to be selected since it is in this channel that the beads are visible.</p>
<ul>
<li>Then, right-click the rows with the mouse.</li>
</ul>
<p>A long menu will appear. This is the main menu of BigStitcher. Anything that we select will only be applied to the selected views.</p>
<ul>
<li>Find the section <code>Processing</code> and select <code>Detect Interest Points...</code>.</li>
</ul>
<p><a href="media/42-detect-menu.png" class="lightbox" data-gallery="quarto-lightbox-gallery-42"><img src="media/42-detect-menu.png" class="img-fluid"></a></p>
<p>In this first window we can choose the <code>Type of interest point detection</code> (Default: <code>Difference of Gaussian</code>) and a label to describe these interest points. One dataset can have multiple sets of interest points.</p>
<ul>
<li>We will keep the default options and press <code>OK</code>.</li>
</ul>
<p><a href="media/43-detect-points.png" class="lightbox" data-gallery="quarto-lightbox-gallery-43"><img src="media/43-detect-points.png" class="img-fluid"></a></p>
<p>We can set different parameters for the <code>Difference of Gaussian</code> approach. What is important to us at this point is to make sure that <code>Interactive...</code> is set for <code>Interest point specification</code> and that we change <code>Downsample XY</code> from <code>Match Z Resolution (less downsampling)</code> to <code>2x</code>. The latter is not essential for all datasets but it works better for this dataset which has relatively high anisotropy (lower Z resolution compared to XY). Keep <code>Downsample Z</code> as <code>1x</code>.</p>
<ul>
<li>Press <code>OK</code>.</li>
</ul>
<p><a href="media/44-detect-details.png" class="lightbox" data-gallery="quarto-lightbox-gallery-44"><img src="media/44-detect-details.png" class="img-fluid"></a></p>
<p>In this case, we can select which view we will open the interactive window for and if we will load the entire stack.</p>
<ul>
<li>Press <code>OK</code> to load the entire first view.</li>
</ul>
<p><a href="media/45-detect-views.png" class="lightbox" data-gallery="quarto-lightbox-gallery-45"><img src="media/45-detect-views.png" class="img-fluid"></a></p>
<p>A stack will open with a rectangular ROI placed at the top left corner. The ROI shows a live view of detected points for the current parameters <code>Sigma</code> and <code>Threshold</code> in the other window.</p>
<p><a href="media/46-detect-interactive.png" class="lightbox" data-gallery="quarto-lightbox-gallery-46"><img src="media/46-detect-interactive.png" class="img-fluid"></a></p>
<p><code>Sigma</code> is the size (radius) of the point and <code>Threshold</code> is the intensity-based cut value to discard low-quality detections. The default is to <code>Find DoG maxima (red)</code>, in other words, bright spots. We can also find dark spots surrounded by bright areas (useful for some samples). Note that this is a normal ImageJ window, so we can zoom, adjust contrast, and if we lose the ROI, we can simply draw a new rectangular ROI. We can drag the ROI around by clicking inside it and holding and dragging it.</p>
<p><a href="media/47-detect-zoom.png" class="lightbox" data-gallery="quarto-lightbox-gallery-47"><img src="media/47-detect-zoom.png" class="img-fluid"></a></p>
<p>What we want to do now is to adjust the <code>Sigma</code> and <code>Threshold</code> so that most of the beads outside the embryo are properly detected with the least spurious detections. The best way to begin is to:</p>
<ul>
<li>Zoom in on a bead outside the embryo.</li>
<li>Check if the circle size is matching well the bead.</li>
<li>Move the <code>Sigma</code> slider, aiming for a circle slightly larger than the bead.</li>
</ul>
<p>Remember to also move through the Z slices of the stack to see how the detection behaves.</p>
<ul>
<li>If the size looks good, increase the <code>Threshold</code> until real beads begin to not be detected, then roll the slider back until most real beads are detected.</li>
</ul>
<p>Note that, no matter how much we tweak these parameters, there‚Äôll always be many non-bead detections in the sample tissues. These detections will not have a strong influence on the registration given that we have enough real beads in the sample.</p>
<ul>
<li>When satisfied, press <code>Done</code>.</li>
</ul>
<p><a href="media/48-detect-start.png" class="lightbox" data-gallery="quarto-lightbox-gallery-48"><img src="media/48-detect-start.png" class="img-fluid"></a></p>
<p>Bead detection takes some time.</p>
<ul>
<li>Once DONE, go to the <code>Multiview Explorer</code> window and press <code>Save</code>.</li>
</ul>
<p><a href="media/49-detect-done.png" class="lightbox" data-gallery="quarto-lightbox-gallery-49"><img src="media/49-detect-done.png" class="img-fluid"></a></p>
<p>This is important because the detections are initially saved in memory and will only be written to disk after pressing <code>Save</code> (detections are saved in a directory named <code>interestpoints.n5</code>).</p>
<p>Note that the column <code>#InterestPoints</code> in the <code>Multiview Explorer</code> now shows <code>1</code> for the five views of channel 561 (but not for channel 488).</p>
<p><a href="media/50-detect-increment.png" class="lightbox" data-gallery="quarto-lightbox-gallery-50"><img src="media/50-detect-increment.png" class="img-fluid"></a></p>
</section>
<section id="sec-register-views" class="level2">
<h2 class="anchored" data-anchor-id="sec-register-views">Register views</h2>
<p>Now we can try to register these views using the detected interest points.</p>
<ul>
<li>With the 5 views selected, right-click and run <code>Register using Interest Points...</code>.</li>
</ul>
<p><a href="media/51-register-menu.png" class="lightbox" data-gallery="quarto-lightbox-gallery-51"><img src="media/51-register-menu.png" class="img-fluid"></a></p>
<p>We can change different registration parameters like the algorithm to be used or the specific set of previously detected interest points. We want to go with the default <code>Fast descriptor-based (rotation invariant)</code> as <code>Registration algorithm</code> since this works well for bead-based registration with Z.1 datasets.</p>
<ul>
<li>Because our views have almost no overlap, change the option <code>Registration in between views</code> to <code>Compare all views against each other</code>.</li>
</ul>
<p>Leave the other options as is making sure we are using the Interest points labeled as <code>beads</code>.</p>
<ul>
<li>Press <code>OK</code>.</li>
</ul>
<p><a href="media/52-register-type.png" class="lightbox" data-gallery="quarto-lightbox-gallery-52"><img src="media/52-register-type.png" class="img-fluid"></a></p>
<p>A window will open with several other parameters to tweak. Please refer to the BigStitcher documentation for the specific function of these. For us, it is important to note two.</p>
<p>The option <code>Fix views</code> set to <code>Fix first view</code> means that all other views will be mapped to the first angle. The option <code>Transformation model</code> set to <code>Affine</code> means that the data will be transformed non-rigidly to fit the individual views. This is important since different portions of the stack might have a certain degree of distortion from the objective lenses and an affine transformation helps to fit the views better together. The other parameters we will only need to change if our initial registration fails.</p>
<ul>
<li>Press <code>OK</code>.</li>
</ul>
<p><a href="media/53-register-affine.png" class="lightbox" data-gallery="quarto-lightbox-gallery-53"><img src="media/53-register-affine.png" class="img-fluid"></a></p>
<p>The next two small windows to open, <code>Regularization Parameters</code> (<code>Rigid</code> and <code>0.10</code>) and <code>Select interest point grouping</code> (<code>Group interest points</code> and <code>5</code>) can be kept as is.</p>
<ul>
<li>Press <code>OK</code> on both.</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/54-register-regularization.png" class="lightbox" data-gallery="quarto-lightbox-gallery-54"><img src="media/54-register-regularization.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/55-register-grouping.png" class="lightbox" data-gallery="quarto-lightbox-gallery-55"><img src="media/55-register-grouping.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<p>The registration will begin and be over in a few seconds. Don‚Äôt blink or you will miss it! If successful, you will see that the individual views will now have moved over (registered) the first view and they are all overlapping in the BigDataViewer window.</p>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/56-register-before.png" class="lightbox" data-gallery="quarto-lightbox-gallery-56"><img src="media/56-register-before.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/57-register-after.png" class="lightbox" data-gallery="quarto-lightbox-gallery-57"><img src="media/57-register-after.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<p>Now that the views are registered, explore the dataset to verify that the registration worked well. The best way to do this is visually. One of the first things that you can do is to:</p>
<ul>
<li>Press <code>Shift+Y</code> and zoom in on a bead close to the embryo‚Äôs surface.</li>
</ul>
<p><a href="media/58-register-check.png" class="lightbox" data-gallery="quarto-lightbox-gallery-58"><img src="media/58-register-check.png" class="img-fluid"></a></p>
<p>You will see the point spread function of one bead in each individual view forming a star with generally four views (as the fifth view is too far away). If the sample is registered well, the center of the point spread functions of the different views should match in the middle of the star.</p>
<p><a href="media/59-register-bead.png" class="lightbox" data-gallery="quarto-lightbox-gallery-59"><img src="media/59-register-bead.png" class="img-fluid"></a></p>
<p>Another thing that you can do is to find a structure you know well in the sample and check that the tissues are actually registered. It can happen that the beads are nicely registered, but the tissues themselves are a bit off.</p>
<ul>
<li>When done checking, make sure to <code>Save</code> the project again.</li>
</ul>
<p><a href="media/60-register-save.png" class="lightbox" data-gallery="quarto-lightbox-gallery-60"><img src="media/60-register-save.png" class="img-fluid"></a></p>
<p>After saving, the <code>#Registrations</code> column should now show the number <code>3</code> for the selected views (if not, deselect and select them again to update the counter).</p>
<p><a href="media/61-register-increment.png" class="lightbox" data-gallery="quarto-lightbox-gallery-61"><img src="media/61-register-increment.png" class="img-fluid"></a></p>
</section>
<section id="sec-set-bounding" class="level2">
<h2 class="anchored" data-anchor-id="sec-set-bounding">Set bounding box</h2>
<p>Our dataset is now registered, but before fusing the views it is important to set a bounding box around the sample. This reduces the final dimensions and file size of the fused data.</p>
<ul>
<li>For that, right-click and select <code>Define Bounding Box...</code>.</li>
</ul>
<p><a href="media/62-bounding-menu.png" class="lightbox" data-gallery="quarto-lightbox-gallery-62"><img src="media/62-bounding-menu.png" class="img-fluid"></a></p>
<p>We want to define it interactively, so leave the <code>Bounding Box</code> option as <code>Define using the BigDataViewer interactively</code>. You can give the bounding box a custom name and define different bounding boxes for different purposes, but the default name is good enough for this tutorial.</p>
<ul>
<li>Click <code>OK</code>.</li>
</ul>
<p><a href="media/63-bounding-interactive.png" class="lightbox" data-gallery="quarto-lightbox-gallery-63"><img src="media/63-bounding-interactive.png" class="img-fluid"></a></p>
<p>Two windows will open: BigDataViewer with the sample and some purple shade and a bounding box window full of sliders.</p>
<p><a href="media/64-bounding-box.png" class="lightbox" data-gallery="quarto-lightbox-gallery-64"><img src="media/64-bounding-box.png" class="img-fluid"></a></p>
<p>For defining the bounding box I follow a specific procedure, always in the same order, to avoid inadvertently leaving out a part of your sample when fusing.</p>
<ul>
<li>First, press <code>Shift+X</code> to orient the sample on XY.</li>
</ul>
<p><a href="media/65-bounding-shiftx.png" class="lightbox" data-gallery="quarto-lightbox-gallery-65"><img src="media/65-bounding-shiftx.png" class="img-fluid"></a></p>
<ul>
<li>Go through the sample (Z) top to bottom to get a sense of the entire volume and stop back at the middle.</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><a href="media/66-bounding-top.png" class="lightbox" data-gallery="quarto-lightbox-gallery-66"><img src="media/66-bounding-top.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><a href="media/67-bounding-mid.png" class="lightbox" data-gallery="quarto-lightbox-gallery-67"><img src="media/67-bounding-mid.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><a href="media/68-bounding-bottom.png" class="lightbox" data-gallery="quarto-lightbox-gallery-68"><img src="media/68-bounding-bottom.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<ul>
<li>Move the <code>x min</code> slider to the right to cut out the region on the left of the sample (the dashed line is the reference edge).</li>
<li>Get close to the sample, but leave a gap.</li>
</ul>
<p><a href="media/69-bounding-xmin.png" class="lightbox" data-gallery="quarto-lightbox-gallery-69"><img src="media/69-bounding-xmin.png" class="img-fluid"></a></p>
<ul>
<li>Once the <code>x min</code> is set, go again top to bottom through Z to make sure nothing was cut out.</li>
<li>Now do the same for <code>x max</code> to cut out the region on the right side of the sample.</li>
</ul>
<p><a href="media/70-bounding-xmax.png" class="lightbox" data-gallery="quarto-lightbox-gallery-70"><img src="media/70-bounding-xmax.png" class="img-fluid"></a></p>
<p>Next we want to cut a bit from the top and bottom regions.</p>
<ul>
<li>Move the slider <code>y min</code> to cut from the top and <code>y max</code> to cut from the bottom.</li>
</ul>
<p>Remember to go through Z to make sure it is not cutting the tip off the embryo (it happens).</p>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/71-bounding-ymin.png" class="lightbox" data-gallery="quarto-lightbox-gallery-71"><img src="media/71-bounding-ymin.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/72-bounding-ymax.png" class="lightbox" data-gallery="quarto-lightbox-gallery-72"><img src="media/72-bounding-ymax.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<ul>
<li>Finally, press <code>Shift+Y</code> to cut out the exceeding portions in the Z direction.</li>
</ul>
<p><a href="media/73-bounding-shifty.png" class="lightbox" data-gallery="quarto-lightbox-gallery-73"><img src="media/73-bounding-shifty.png" class="img-fluid"></a></p>
<ul>
<li>Use <code>z min</code> to cut from the top (in this orientation) always going through Y to check!</li>
<li>Then adjust <code>z max</code> to cut from the bottom (in this orientation), also going through Y.</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/74-bounding-zmin.png" class="lightbox" data-gallery="quarto-lightbox-gallery-74"><img src="media/74-bounding-zmin.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/75-bounding-zmax.png" class="lightbox" data-gallery="quarto-lightbox-gallery-75"><img src="media/75-bounding-zmax.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<ul>
<li>When done, press <code>OK</code> in the bounding box window.</li>
</ul>
<p><a href="media/76-bounding-ok.png" class="lightbox" data-gallery="quarto-lightbox-gallery-76"><img src="media/76-bounding-ok.png" class="img-fluid"></a></p>
<p>The dimensions of the interactively defined bounding box and the estimated size of the fused image will appear.</p>
<ul>
<li>Press <code>OK</code> and <code>Save</code>.</li>
</ul>
<p><a href="media/77-bounding-dimensions.png" class="lightbox" data-gallery="quarto-lightbox-gallery-77"><img src="media/77-bounding-dimensions.png" class="img-fluid"></a></p>
</section>
<section id="sec-fuse-single" class="level2">
<h2 class="anchored" data-anchor-id="sec-fuse-single">Fuse dataset (one channel)</h2>
<p>Finally, let‚Äôs begin the fusing of registered views.</p>
<ul>
<li>Select the five registered views in the Multiview Explorer, right-click and press <code>Image Fusion...</code>.</li>
</ul>
<p><a href="media/78-fuse-menu.png" class="lightbox" data-gallery="quarto-lightbox-gallery-78"><img src="media/78-fuse-menu.png" class="img-fluid"></a></p>
<p>The window with fusion options will appear.</p>
<p><a href="media/79-fuse-options.png" class="lightbox" data-gallery="quarto-lightbox-gallery-79"><img src="media/79-fuse-options.png" class="img-fluid"></a></p>
<p>Our ‚ÄúMy Bounding Box‚Äù is automatically selected for the <code>Bounding Box</code>.</p>
<p>We can choose to downsample the fused image. I highly recommend downsampling 2x, 4x, or even 8x, when fusing a dataset for the first time. Fusing without downsampling (1x) can take a really long time for large samples (many hours), so it is good practice to downsample the fused image to make sure the fusing parameters are good for the dataset before fusing the whole thing.</p>
<ul>
<li>For this tutorial, leave <code>Downsampling</code> at <code>1x</code>.</li>
<li>For <code>Interpolation</code> keep <code>Linear interpolation</code>, as it gives better outputs.</li>
</ul>
<p>The <code>Fusion type</code> is an important parameter to choose wisely.</p>
<ol type="1">
<li>The simplest is <code>Avg</code>, which averages the signal of every view per pixel. This is quick but it is combining the good contrast of one view with the blurred side of another view and the resulting contrast will be suboptimal.</li>
<li><code>Avg, Blending</code> is the same as <code>Avg</code>, but it blends smoothly the edges of the different views giving a slightly better fusing than simple <code>Avg</code>.</li>
<li><code>Avg, Blending &amp; Content Based</code> improves the other two options by adding a step that checks and keeps only the best information for each coordinate (keep good contrast, discard blurred information). This option gives the best results. However, it is also the one that requires more memory and takes longer to finish (much longer).</li>
</ol>
<p>A sane start would be 2x or 4x downsample using <code>Avg, Blending</code> before trying less downsampling and the content based fusion.</p>
<ul>
<li>For this tutorial, set <code>Fusion type</code> to <code>Avg, Blending</code>.</li>
</ul>
<p>For the <code>Pixel type</code> I often use 16-bit, but it depends on what the goal of the fused image is. If it is only to have a volume visualization, 8-bit might be enough. If further processing and analysis is expected, definitely go for 16-bit or, in special cases, 32-bit.</p>
<ul>
<li>Set <code>Pixel type</code> to <code>16-bit unsigned integer</code>.</li>
</ul>
<p>BigStitcher also has an option for using the interest points information during the fusion step to obtain better results (<code>Interest Points for Non-Rigid</code>). This is a newer feature for advanced use cases and I have not tried it enough to have an opinion about it.</p>
<ul>
<li>Leave <code>Interest Points for Non-Rigid</code> as <code>-= Disable Non-Rigid =-</code>.</li>
</ul>
<p>Generally, we want to have one fused image per timepoint per channel.</p>
<ul>
<li>Set <code>Produce one fused image for</code> to <code>Each timepoint &amp; channel</code>.</li>
</ul>
<p>And I always save the fused image to TIFF stacks. Choosing <code>Display using ImageJ</code> can be dangerous as the fused image will be large and the computer can run out of memory and crash. Writing to disk is safer.</p>
<ul>
<li><p>Set <code>Fused image</code> to <code>Save as (compressed) TIFF stacks</code>.</p></li>
<li><p>Press <code>OK</code>.</p></li>
<li><p>A window with min/max levels will open.</p></li>
<li><p>Press <code>OK</code>.</p></li>
</ul>
<p><a href="media/80-fuse-minmax.png" class="lightbox" data-gallery="quarto-lightbox-gallery-80"><img src="media/80-fuse-minmax.png" class="img-fluid"></a></p>
<p>The output directory is the same where the <code>dataset.xml</code> is. We can add a prefix to the filename to distinguish different types of fusion and downsampling (useful when doing it multiple times).</p>
<ul>
<li>Set <code>Filename addition</code> to <code>avg_blend_1x</code>.</li>
<li>Press <code>OK</code> and fusion will start.</li>
</ul>
<p><a href="media/81-fuse-filename.png" class="lightbox" data-gallery="quarto-lightbox-gallery-81"><img src="media/81-fuse-filename.png" class="img-fluid"></a></p>
<p>When done, open the fused dataset in Fiji.</p>
<ul>
<li>Drag and drop the file <code>avg_blend_1x_fused_tp_0_ch_1</code> into Fiji‚Äôs window.</li>
<li>Then, adjust the contrast to see the data.</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/82-fuse-open.png" class="lightbox" data-gallery="quarto-lightbox-gallery-82"><img src="media/82-fuse-open.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/83-fuse-contrast.png" class="lightbox" data-gallery="quarto-lightbox-gallery-83"><img src="media/83-fuse-contrast.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<p>Inspect the fusion result, checking for artifacts. If the sample has a membrane staining, for example, check for doubled membranes.</p>
<ul>
<li>Check the fused dataset with the Orthogonal Views.</li>
</ul>
<p><a href="media/84-fuse-isotropic.png" class="lightbox" data-gallery="quarto-lightbox-gallery-84"><img src="media/84-fuse-isotropic.png" class="img-fluid"></a></p>
<p>Note that the resulting fused image is isotropic.</p>
</section>
<section id="sec-duplicate-transformation" class="level2">
<h2 class="anchored" data-anchor-id="sec-duplicate-transformation">Duplicate transformation</h2>
<p>Now that we have successfully registered and fused the views of one channel, we can simply apply the series of transformations to the other channel without the need to detect interest points or register the channel independently.</p>
<p><a href="media/85-duplicate-unregistered.png" class="lightbox" data-gallery="quarto-lightbox-gallery-85"><img src="media/85-duplicate-unregistered.png" class="img-fluid"></a></p>
<p>We can do so using the tool Duplicate Transformations from BigStitcher.</p>
<ul>
<li>First, take a note of which channel we have registered (it‚Äôs the <code>561</code>).</li>
<li>Then, close the <code>Multiview Explorer</code> and the <code>Select dataset</code> window that pops up.</li>
<li>Finally, go to <code>Plugins</code> &gt; <code>BigStitcher</code> &gt; <code>General</code> &gt; <code>Tools</code> &gt; <code>Duplicate Transformations</code>.</li>
</ul>
<p><a href="media/86-duplicate-open.png" class="lightbox" data-gallery="quarto-lightbox-gallery-86"><img src="media/86-duplicate-open.png" class="img-fluid"></a></p>
<ul>
<li>Select the option <code>One channel to other channels</code>.</li>
</ul>
<p><a href="media/87-duplicate-channels.png" class="lightbox" data-gallery="quarto-lightbox-gallery-87"><img src="media/87-duplicate-channels.png" class="img-fluid"></a></p>
<p>A <code>Select dataset</code> window will open with the last <code>dataset.xml</code> already opened.</p>
<ul>
<li>Press <code>OK</code>.</li>
</ul>
<p><a href="media/88-duplicate-dataset.png" class="lightbox" data-gallery="quarto-lightbox-gallery-88"><img src="media/88-duplicate-dataset.png" class="img-fluid"></a></p>
<ul>
<li>Set the <code>Source channel</code> to <code>561</code>.</li>
<li>Set <code>Target channel(s)</code> to <code>All Channels</code> (all the other channels except for the source one).</li>
</ul>
<p>The last option, <code>Duplicate which transformations</code> is important. Generally, <code>Replace all transformations</code> works for most cases. However, I often prefer to use <code>Add last transformation only</code>. This will take the last transformation from the source channel and apply it to the target channel. For this to work, however, the source channel can only be one transformation ahead of the target. If, for instance, we had run two subsequent transformations on the source channel, then applied only the last one to the other channels, we would not entirely duplicate all the transformations between the channels. So, always check the <code>#Registrations</code> in the <code>Multiview Explorer</code> to be sure if only the last duplication would work, or simply replace all transformations.</p>
<ul>
<li>For now, set <code>Duplicate which transformations</code> to <code>Add last transformation only</code>.</li>
<li>Press <code>OK</code>.</li>
</ul>
<p><a href="media/89-duplicate-options.png" class="lightbox" data-gallery="quarto-lightbox-gallery-89"><img src="media/89-duplicate-options.png" class="img-fluid"></a></p>
<p>The transformations will be applied and recorded in the XML file. It‚Äôs quick.</p>
<ul>
<li>Open BigStitcher again and check if the 5 views of the other channel are registered (they should be).</li>
</ul>
<p><a href="media/90-duplicate-registered.png" class="lightbox" data-gallery="quarto-lightbox-gallery-90"><img src="media/90-duplicate-registered.png" class="img-fluid"></a></p>
</section>
<section id="sec-fuse-all" class="level2">
<h2 class="anchored" data-anchor-id="sec-fuse-all">Fuse dataset (all channels)</h2>
<p>We now have both channels registered, but only one was fused.</p>
<ul>
<li>To fuse both channels select all the views in the <code>Multiview Explorer</code>, right-click, and select <code>Image Fusion...</code>.</li>
</ul>
<p><a href="media/91-fuse-all.png" class="lightbox" data-gallery="quarto-lightbox-gallery-91"><img src="media/91-fuse-all.png" class="img-fluid"></a></p>
<ul>
<li>Set the desired parameters for fusion (optimized previously) and run the fusion again as described above.</li>
</ul>
<p>This time there will be two files as output: <code>avg_blend_1x_fused_tp_0_ch_0.tif</code> and <code>avg_blend_1x_fused_tp_0_ch_1.tif</code>.</p>
<p><a href="media/92-fuse-outputs.png" class="lightbox" data-gallery="quarto-lightbox-gallery-92"><img src="media/92-fuse-outputs.png" class="img-fluid"></a></p>
<ul>
<li>Open both files in Fiji and adjust their contrast.</li>
</ul>
<p><a href="media/93-fuse-contrast.png" class="lightbox" data-gallery="quarto-lightbox-gallery-93"><img src="media/93-fuse-contrast.png" class="img-fluid"></a></p>
<ul>
<li>Then go to <code>Image</code> &gt; <code>Color</code> &gt; <code>Merge Channels...</code>.</li>
</ul>
<p><a href="media/94-fuse-merge.png" class="lightbox" data-gallery="quarto-lightbox-gallery-94"><img src="media/94-fuse-merge.png" class="img-fluid"></a></p>
<ul>
<li>Select <code>ch_0</code> for <code>C1</code> and <code>ch_1</code> for <code>C2</code> and press <code>OK</code>.</li>
</ul>
<p><a href="media/95-fuse-merged.png" class="lightbox" data-gallery="quarto-lightbox-gallery-95"><img src="media/95-fuse-merged.png" class="img-fluid"></a></p>
<p>A red-green 2-channel stack will open. But, red-green combination isn‚Äôt good.</p>
<ul>
<li>Update the red to magenta using the LUT tool.</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/96-fuse-redgreen.png" class="lightbox" data-gallery="quarto-lightbox-gallery-96"><img src="media/96-fuse-redgreen.png" class="img-fluid"></a></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><a href="media/97-fuse-greenmagenta.png" class="lightbox" data-gallery="quarto-lightbox-gallery-97"><img src="media/97-fuse-greenmagenta.png" class="img-fluid"></a></p>
</div>
</div>
</div>
<p>We can even compare this fused dataset with one of the views of the original dataset.</p>
<ul>
<li>Drag and drop the CZI file, select the first view only to import, and put the stacks side-by-side for a comparison slice by slice.</li>
</ul>
<p><a href="media/98-fuse-versus.png" class="lightbox" data-gallery="quarto-lightbox-gallery-98"><img src="media/98-fuse-versus.png" class="img-fluid"></a></p>
<p>Note how the missing data in the single view is nicely present in the fused dataset.</p>
</section>
<section id="sec-citation" class="level2">
<h2 class="anchored" data-anchor-id="sec-citation">Citation</h2>
<p>Vellutini, B. C. (2026). Multiview reconstruction in Fiji using BigStitcher. Zenodo. <a href="https://doi.org/10.5281/zenodo.18090752" class="uri">https://doi.org/10.5281/zenodo.18090752</a></p>
</section>
<section id="sec-license" class="level2">
<h2 class="anchored" data-anchor-id="sec-license">License</h2>
<p>This tutorial is available under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Horl2019-vx" class="csl-entry" role="listitem">
H√∂rl, David, Fabio Rojas Rusak, Friedrich Preusser, Paul Tillberg, Nadine Randel, Raghav K Chhetri, Albert Cardona, et al. 2019. <span>‚ÄúBigStitcher: Reconstructing High-Resolution Image Datasets of Cleared and Expanded Samples.‚Äù</span> <em>Nat. Methods</em> 16 (September): 870‚Äì74. <a href="https://doi.org/10.1038/s41592-019-0501-0">https://doi.org/10.1038/s41592-019-0501-0</a>.
</div>
<div id="ref-Pietzsch2015-md" class="csl-entry" role="listitem">
Pietzsch, Tobias, Stephan Saalfeld, Stephan Preibisch, and Pavel Tomancak. 2015. <span>‚ÄúBigDataViewer: Visualization and Processing for Large Image Data Sets.‚Äù</span> <em>Nat. Methods</em> 12 (June): 481‚Äì83. <a href="https://doi.org/10.1038/nmeth.3392">https://doi.org/10.1038/nmeth.3392</a>.
</div>
<div id="ref-Preibisch2010-uu" class="csl-entry" role="listitem">
Preibisch, Stephan, Stephan Saalfeld, Johannes Schindelin, and Pavel Tomancak. 2010. <span>‚ÄúSoftware for Bead-Based Registration of Selective Plane Illumination Microscopy Data.‚Äù</span> <em>Nat. Methods</em> 7 (June): 418‚Äì19. <a href="https://doi.org/10.1038/nmeth0610-418">https://doi.org/10.1038/nmeth0610-418</a>.
</div>
<div id="ref-Schindelin2012-di" class="csl-entry" role="listitem">
Schindelin, Johannes, Ignacio Arganda-Carreras, Erwin Frise, Verena Kaynig, Mark Longair, Tobias Pietzsch, Stephan Preibisch, et al. 2012. <span>‚ÄúFiji: An Open-Source Platform for Biological-Image Analysis.‚Äù</span> <em>Nat. Methods</em> 9 (June): 676‚Äì82. <a href="https://doi.org/10.1038/nmeth.2019">https://doi.org/10.1038/nmeth.2019</a>.
</div>
<div id="ref-Vellutini2025-rl" class="csl-entry" role="listitem">
Vellutini, Bruno C. 2025. <span>‚ÄúFly Embryo Multiview Lightsheet Dataset.‚Äù</span> Zenodo. <a href="https://doi.org/10.5281/zenodo.18078061">https://doi.org/10.5281/zenodo.18078061</a>.
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/bruvellu\.github\.io\/light-sheet-image-analysis-workshop-2026");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../practicals/practical_macros/index.html" class="pagination-link" aria-label="Macro programming in Fiji">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Macro programming in Fiji</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../practicals/practical_segmentation/index.html" class="pagination-link" aria-label="Post-processing, segmentation and labelling">
        <span class="nav-page-text">Post-processing, segmentation and labelling</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://lightsheetchile.cl/light-sheet-image-analysis-workshop-2026-2/">
<p>LiSIUM</p>
</a>
  </li>  
</ul>
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/bruvellu/light-sheet-image-analysis-workshop-2026/edit/main/practicals/practical_multiview/index.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/bruvellu/light-sheet-image-analysis-workshop-2026/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 microscope favicon created by Freepik - Flaticon
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>